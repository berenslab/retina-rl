Bootstrap: docker
From: ubuntu:22.04

%post

    # Update
    apt -qy update

    # Python
    apt -y install python3 python3-all-dev pip

    # VisDoom Depends
    apt install -y \
        cmake \
        libboost-all-dev \
        libsdl2-dev \
        libfreetype6-dev \
        libgl1-mesa-dev \
        libglu1-mesa-dev \
        libpng-dev \
        libjpeg-dev \
        libbz2-dev \
        libfluidsynth-dev \
        libgme-dev \
        libopenal-dev \
        zlib1g-dev \
        timidity \
        git \
        tar \
        gifsicle \
        nasm

    # Sample Factory Base
    pip install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/cu113
    pip install vizdoom
    pip install sample-factory

    # retinal-rl Extra
    pip install matplotlib pyglet imageio opentsne pygifsicle


